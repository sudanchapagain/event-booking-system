<head>
    <title>Create Event - Chautari</title>
    <link rel="stylesheet" href="../assets/css/default.css">
    <link rel="stylesheet" href="../assets/css/index.css">
    <link rel="stylesheet" href="../assets/css/new.css">
</head>

<body>
    <main>
        <h1 style="font-size: 2.5rem; color: #ff4a22">Create a new event!</h1>

        <?php if (!empty($errors)): ?>
            <ul>
                <?php foreach ($errors as $error): ?>
                    <li class="error-message"><?= htmlspecialchars($error) ?></li>
                <?php endforeach; ?>
            </ul>
        <?php endif; ?>

        <form action="new" method="POST" enctype="multipart/form-data" onsubmit="return validateForm()">
            <label for="title">Event Title <small>*</small></label>
            <input type="text" name="title" id="title" placeholder="Internastional art exhibition by nepal art council" required>
            <div id="titleError" class="error-message"></div>
            <br>

            <label for="location">Location <small>*</small></label>
            <input type="text" name="location" id="location" placeholder="Pradarshani marg, Kathmandu" required>
            <div id="locationError" class="error-message"></div>
            <br>

            <div id="startDateError" class="error-message"></div>
            <div id="endDateError" class="error-message"></div>
            <div class="new-event-date-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div>
                    <label for="start_date">Start Date and Time <small>*</small></label>
                    <input type="datetime-local" name="start_date" id="start_date" required>
                    <script>
                        document.getElementById("start_date").min = new Date().toISOString().split("T")[0] + "T00:00";
                    </script>
                </div>
                <div>
                    <label for="end_date">End Date and Time <small>*</small></label>
                    <input type="datetime-local" name="end_date" id="end_date" required>
                    <script>
                        document.getElementById("end_date").min = new Date().toISOString().split("T")[0] + "T00:00";
                    </script>
                </div>
            </div>
            <br>

            <label for="event_image">Event Image</label>
            <input type="file" name="event_image" id="event_image" accept="image/*">
            <span class="tooltip">Upload an image to represent the event.</span>
            <br><br>

            <label for="description">Event Description <small>*</small></label>
            <textarea name="description" id="description" style="height: 200px;" required></textarea>
            <br><br>

            <label for="capacity">Event Capacity <small>*</small></label>
            <input type="number" name="capacity" id="capacity" placeholder="Specify the maximum number of attendees." required min="1">
            <div id="capacityError" class="error-message"></div>
            <br><br>

            <h3>Ticket Price</h3>
            <span class="tooltip">Leave the price empty if it's free.</span>
            <div id="ticket_price">
                <input type="number" name="ticket_price" step="0.01" min="0" placeholder="Ticket Price">
            </div>
            <br>

            <label for="category">Event Category</label>
            <select name="category" id="category">
                <option value="">Select Category</option>
                <?php foreach ($categories as $category): ?>
                    <option value="<?= $category['category_id'] ?>"><?= htmlspecialchars($category['name']) ?></option>
                <?php endforeach; ?>
            </select>
            <br><br>

            <button class="button-new" type="submit">Create Event</button>
        </form>

        <script src="../assets/js/new-event-validation.js"></script>
    </main>
</body>
