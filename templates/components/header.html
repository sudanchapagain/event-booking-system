{% load static %}
<style>
    .header-wrapper {
        background-color: #fff;
        position: sticky;
        top: 0;
        z-index: 100;
    }

    header {
        padding: 15px 32px;
        max-width: 78rem;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.85rem;
        font-weight: 500;
        background-color: #fff;
        border-bottom: #f0f0f0 1px solid;
    }

    .logo-header {
        user-select: none;
    }

    .logo-header>a {
        text-decoration: none;
        color: #171717;
    }

    .logo-header-inner>p {
        display: inline;
        font-weight: 600;
        font-size: 1.125rem;
        line-height: 1.75;
    }

    .logo-header-inner {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    nav ul {
        display: flex;
        list-style: none;
    }

    nav ul li {
        padding: 5px 10px;
    }

    nav ul li a {
        text-decoration: none;
        color: #171717;
    }

    nav ul li a:hover {
        color: #ff4a22;
    }

    nav ul li a.active {
        background-color: #f0f0f0;
        padding: 8px 15px;
        border-radius: 20px;
    }

    .nav-button-primary {
        background-color: #ff4a22;
        color: white;
        padding: 8px 15px;
        border-radius: 66px;
        text-decoration: none;
        font-weight: 500;
        margin-left: 0.5rem;
    }

    .nav-button-primary:hover {
        background-color: #ff6438;
    }

    .nav-button-secondary {
        color: #171717;
        padding: 8px 15px;
        border-radius: 66px;
        text-decoration: none;
        font-weight: 500;
        margin-left: 0.5rem;
    }

    .nav-button-secondary:hover {
        background-color: #f0f0f0;
    }

    .header-auth {
        display: flex;
        align-items: center;
    }

    .header-profile {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        align-items: center;
        cursor: pointer;
    }

    .header-profile-img {
        position: relative;
        width: 2.5rem;
        height: 2.5rem;
        overflow: hidden;
        background-color: #f3f4f6;
        border-radius: 9999px;
    }

    .header-profile-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        padding-top: 12px;
        padding-left: 4px;
    }

    .header-profile-info p {
        margin: 0;
        line-height: 1.3;
    }

    .header-profile-info p:last-child {
        color: grey;
        font-size: 0.8rem;
    }

    .header-dropdown {
        position: relative;
    }

    .header-dropdown-menu {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        border: 1px solid #f0f0f0;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        min-width: 150px;
        display: none;
        z-index: 200;
        padding-top: 8px;
    }

    .header-dropdown:hover .header-dropdown-menu {
        display: block;
    }

    .header-dropdown-menu a {
        display: block;
        padding: 10px 15px;
        color: #171717;
        text-decoration: none;
    }

    .header-dropdown-menu a:hover {
        background-color: #f0f0f0;
    }

    .header-dropdown-menu a:first-child {
        border-radius: 8px 8px 0 0;
    }

    .header-dropdown-menu a:last-child {
        border-radius: 0 0 8px 8px;
    }

    .hamburger {
        display: none;
        cursor: pointer;
        flex-direction: column;
        gap: 5px;
        background: none;
        border: none;
        padding: 5px;
    }

    .hamburger span {
        display: block;
        width: 25px;
        height: 2px;
        background-color: #171717;
        transition: transform 0.3s ease, opacity 0.3s ease;
    }

    .hamburger.open span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
    }

    .hamburger.open span:nth-child(2) {
        opacity: 0;
    }

    .hamburger.open span:nth-child(3) {
        transform: rotate(-45deg) translate(5px, -5px);
    }

    .mobile-nav {
        display: none;
    }

    .mobile-nav.open {
        display: block;
        background-color: #fff;
        border-bottom: 1px solid #f0f0f0;
        padding: 15px 32px 20px;
    }

    .mobile-nav nav ul {
        flex-direction: column;
        padding: 0;
        margin: 0;
    }

    .mobile-nav nav ul li {
        padding: 10px 0;
        border-bottom: 1px solid #f0f0f0;
    }

    .mobile-nav nav ul li:last-child {
        border-bottom: none;
    }

    .mobile-nav nav ul li a {
        display: block;
        font-size: 1rem;
    }

    .mobile-nav-auth {
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid #f0f0f0;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .mobile-nav-auth a {
        display: block;
        padding: 10px 15px;
        text-decoration: none;
        color: #171717;
        border-radius: 8px;
    }

    .mobile-nav-auth a:hover {
        background-color: #f0f0f0;
    }

    .mobile-nav-auth .nav-button-primary,
    .mobile-nav-auth .nav-button-secondary {
        text-align: center;
        margin-left: 0;
    }

    @media (max-width: 768px) {
        header {
            padding: 15px 20px;
        }

        .nav-desktop,
        .header-auth {
            display: none;
        }

        .hamburger {
            display: flex;
        }
    }

    @media (min-width: 769px) {
        .mobile-nav {
            display: none !important;
        }

        .hamburger {
            display: none !important;
        }
    }
</style>
<div class="header-wrapper">
    <header>
        <div class="logo-header">
            <a href="{% url 'home' %}">
                <div class="logo-header-inner">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="32"
                         height="32"
                         viewBox="0 0 256 256">
                        <path fill="currentColor" d="M128 187.85a72 72 0 0 0 8 4.62V232a8 8 0 0 1-16 0v-39.53a72 72 0 0 0 8-4.62m70.1-125.26a76 76 0 0 0-140.2 0A71.71 71.71 0 0 0 16 127.8C15.9 166 48 199 86.14 200a72.2 72.2 0 0 0 33.86-7.53v-35.53l-43.58-21.78a8 8 0 1 1 7.16-14.32L120 139.06V88a8 8 0 0 1 16 0v27.06l36.42-18.22a8 8 0 1 1 7.16 14.32L136 132.94v59.53a72.2 72.2 0 0 0 32 7.53h1.82c38.18-1 70.29-34 70.18-72.2a71.71 71.71 0 0 0-41.9-65.21" />
                    </svg>
                    <p>Chautari</p>
                </div>
            </a>
        </div>

        <div class="nav-desktop">
            <nav>
                <ul>
                    <li>
                        <a href="{% url 'home' %}"
                           {% if request.resolver_match.url_name == 'home' %}class="active"{% endif %}>Home</a>
                    </li>
                    <li>
                        <a href="{% url 'about' %}"
                           {% if request.resolver_match.url_name == 'about' %}class="active"{% endif %}>About</a>
                    </li>
                    <li>
                        <a href="{% url 'contact' %}"
                           {% if request.resolver_match.url_name == 'contact' %}class="active"{% endif %}>Contact</a>
                    </li>
                </ul>
            </nav>
        </div>

        <div class="header-auth">
            {% if user.is_authenticated %}
                <div class="header-dropdown">
                    <div class="header-profile">
                        <div class="header-profile-img">
                            <img src="{% static 'images/fallback.svg' %}" alt="Profile">
                        </div>
                        <div class="header-profile-info">
                            <p>
                                <b>{{ user.username|default:user.email }}</b>
                            </p>
                            <p>
                                {% if user.is_site_admin %}
                                    Admin
                                {% elif user.is_organizer %}
                                    Organizer
                                {% else %}
                                    User
                                {% endif %}
                            </p>
                        </div>
                    </div>
                    <div class="header-dropdown-menu">
                        <a href="{% url 'profile' %}">Profile</a>
                        <a href="{% url 'settings' %}">Settings</a>
                        {% if user.is_organizer or user.is_site_admin %}
                            <a href="{% url 'dashboard' %}">Dashboard</a>
                        {% endif %}
                        <a href="{% url 'event_create' %}">Create Event</a>
                        <a href="{% url 'logout' %}">Log out</a>
                    </div>
                </div>
            {% else %}
                <a class="nav-button-secondary" href="{% url 'login' %}">Log in</a>
                <a class="nav-button-primary" href="{% url 'signup' %}">Sign up today</a>
            {% endif %}
        </div>

        <button class="hamburger" aria-label="Toggle menu" aria-expanded="false">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </header>

    <div class="mobile-nav">
        <nav>
            <ul>
                <li>
                    <a href="{% url 'home' %}"
                       {% if request.resolver_match.url_name == 'home' %}class="active"{% endif %}>Home</a>
                </li>
                <li>
                    <a href="{% url 'about' %}"
                       {% if request.resolver_match.url_name == 'about' %}class="active"{% endif %}>About</a>
                </li>
                <li>
                    <a href="{% url 'contact' %}"
                       {% if request.resolver_match.url_name == 'contact' %}class="active"{% endif %}>Contact</a>
                </li>
                <li>
                    <a href="{% url 'explore' %}">Explore Events</a>
                </li>
            </ul>
        </nav>
        <div class="mobile-nav-auth">
            {% if user.is_authenticated %}
                <a href="{% url 'profile' %}">Profile</a>
                <a href="{% url 'settings' %}">Settings</a>
                {% if user.is_organizer or user.is_site_admin %}
                    <a href="{% url 'dashboard' %}">Dashboard</a>
                {% endif %}
                <a href="{% url 'event_create' %}">Create Event</a>
                <a href="{% url 'logout' %}">Log out</a>
            {% else %}
                <a class="nav-button-secondary" href="{% url 'login' %}">Log in</a>
                <a class="nav-button-primary" href="{% url 'signup' %}">Sign up today</a>
            {% endif %}
        </div>
    </div>
</div>

<script>
    (function() {
        const hamburger = document.querySelector('.hamburger');
        const mobileNav = document.querySelector('.mobile-nav');

        if (hamburger && mobileNav) {
            hamburger.addEventListener('click', function() {
                const isOpen = mobileNav.classList.toggle('open');
                hamburger.classList.toggle('open');
                hamburger.setAttribute('aria-expanded', isOpen);
            });
        }
    })();
</script>
